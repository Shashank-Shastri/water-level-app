const darkSwitch = document.getElementById("darkSwitch");
function themeToggle() {
  document.getElementById("darkSwitch").checked = !document.getElementById(
    "darkSwitch"
  ).checked;
  resetTheme();
}
function initTheme() {
  let preferredTheme = localStorage.getItem("darkSwitch");
  const e =
    null !== preferredTheme &&
    "dark" === preferredTheme;
  (darkSwitch.checked = e),
    e
      ? (document.body.setAttribute("data-theme", "dark"),
        (document.getElementById("dark-mode-switch").name = "sunny"))
      : (document.body.removeAttribute("data-theme"),
        (document.getElementById("dark-mode-switch").name = "moon"));
}
function resetTheme() {
  darkSwitch.checked
    ? (document.body.setAttribute("data-theme", "dark"),
      (document.getElementById("dark-mode-switch").name = "sunny"),
      localStorage.setItem("darkSwitch", "dark"))
    : (document.body.removeAttribute("data-theme"),
      (document.getElementById("dark-mode-switch").name = "moon"),
      localStorage.removeItem("darkSwitch"));
}
window.addEventListener("load", () => {
  darkSwitch &&
    (initTheme(),
    darkSwitch.addEventListener("change", () => {
      resetTheme();
    }));
});
